import{a as ie}from"./chunk-5DYXP5XF.js";import{$ as _,Ca as Q,Fa as X,H as s,Ia as F,Ja as I,Ka as f,La as T,M as y,Ma as U,Na as Z,Oa as B,P as M,Pa as N,Ra as D,S as p,Sa as V,T as j,Ta as ee,Ua as te,V as a,Va as ne,W as n,Wa as oe,X as w,Xa as z,_ as v,a as h,aa as c,b as P,ea as Y,f as O,fa as i,ga as b,ha as u,hb as A,j as S,ja as W,ka as H,lb as G,rb as L,t as C,ta as k,tb as R,ua as J,v as g,vb as $,w as x,wa as E,xb as q,za as K}from"./chunk-PSNKVQBX.js";var _e=r=>["/proponents/user",r];function be(r,d){if(r&1){let e=v();a(0,"div",15)(1,"h4")(2,"a",16),i(3),n()(),a(4,"p")(5,"strong"),i(6,"Email:"),n(),i(7),n(),a(8,"p")(9,"strong"),i(10,"Genre:"),n(),i(11),n(),a(12,"p")(13,"strong"),i(14,"Status:"),n(),i(15),n(),a(16,"button",17),_("click",function(){let t=g(e).$implicit,m=c();return x(m.removeUser(t.id))}),i(17,"Delete"),n()()}if(r&2){let e=d.$implicit;s(2),p("routerLink",H(5,_e,e.id)),s(),b(e.name),s(4),u(" ",e.email,""),s(4),u(" ",e.gender,""),s(4),u(" ",e.status,"")}}var re=(()=>{class r{users=[];filtered=[];paginatedUsers=[];page=1;pageSize=7;searchTerm="";form;window=window;api=C(ie);fb=C(oe);constructor(){this.form=this.fb.group({name:["",f.required],email:["",[f.required,f.email]],gender:["female",f.required],status:["active",f.required]})}ngOnInit(){this.api.getUsers().subscribe(e=>{this.users=e.map(o=>P(h({},o),{role:""})),this.filtered=[...this.users],this.updatePagination()})}updatePagination(){let e=(this.page-1)*this.pageSize,o=e+this.pageSize;this.paginatedUsers=this.filtered.slice(e,o)}onSearchTerm(e){this.searchTerm=e.toLowerCase(),this.filtered=this.users.filter(o=>o.name.toLowerCase().includes(this.searchTerm)),this.page=1,this.updatePagination()}goToPage(e){this.page=e,this.updatePagination()}addUser(){if(this.form.valid){let e=h({id:Date.now()},this.form.value);this.users.unshift(e),this.filtered=this.searchTerm.trim()===""?[...this.users]:this.users.filter(o=>o.name.toLowerCase().includes(this.searchTerm)),this.page=1,this.updatePagination(),this.form.reset({gender:"female"})}}removeUser(e){this.users=this.users.filter(o=>o.id!==e),this.onSearchTerm(this.searchTerm)}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=y({type:r,selectors:[["app-proponents"]],decls:27,vars:6,consts:[["searchInput",""],[1,"proponents-wrapper"],[1,"controls"],["type","text","placeholder","Search",3,"input"],[1,"card-container"],["class","user-card",4,"ngFor","ngForOf"],[1,"pagination"],[3,"click","disabled"],[1,"add-user-form",3,"ngSubmit","formGroup"],["type","text","formControlName","name","placeholder","Name"],["type","email","formControlName","email","placeholder","Email"],["formControlName","gender"],["value","male"],["value","female"],["type","submit",3,"disabled"],[1,"user-card"],[1,"name-link",3,"routerLink"],[3,"click"]],template:function(o,t){if(o&1){let m=v();a(0,"div",1)(1,"h2"),i(2,"Users"),n(),a(3,"div",2)(4,"input",3,0),_("input",function(){g(m);let se=Y(5);return x(t.onSearchTerm(se.value))}),n()(),a(6,"div",4),M(7,be,18,7,"div",5),n(),a(8,"div",6)(9,"button",7),_("click",function(){return g(m),x(t.goToPage(t.page-1))}),i(10,"\u2190 Prev"),n(),a(11,"span"),i(12),n(),a(13,"button",7),_("click",function(){return g(m),x(t.goToPage(t.page+1))}),i(14," Next \u2192 "),n()(),a(15,"form",8),_("ngSubmit",function(){return g(m),x(t.addUser())}),a(16,"h3"),i(17,"Add User"),n(),w(18,"input",9)(19,"input",10),a(20,"select",11)(21,"option",12),i(22,"Male"),n(),a(23,"option",13),i(24,"Female"),n()(),a(25,"button",14),i(26,"Send"),n()()()}o&2&&(s(7),p("ngForOf",t.paginatedUsers),s(2),p("disabled",t.page===1),s(3),u("Page ",t.page,""),s(),p("disabled",t.page*t.pageSize>=t.filtered.length),s(2),p("formGroup",t.form),s(10),p("disabled",t.form.invalid))},dependencies:[E,k,z,N,te,ne,I,ee,T,U,D,V,A,G,L,R,$,q,F,X],styles:[`.proponents-wrapper[_ngcontent-%COMP%]{padding:32px;background:linear-gradient(#e7f8ec,#dff3e6);font-family:Montserrat,sans-serif;color:#333}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:24px;flex-wrap:wrap;gap:12px}.controls[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;font-size:16px;border-radius:6px;border:1px solid #ccc;background:#fff;font-family:Montserrat,sans-serif;flex:1}.card-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:32px}.user-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #89c997;border-radius:8px;padding:20px;box-shadow:0 4px 6px #0000001a;font-family:Montserrat,sans-serif;transition:transform .3s ease,opacity .3s ease}.user-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);opacity:.98}.user-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;color:#2fa66a;margin:0;padding:0}.user-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:4px 0;color:#333}.user-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:12px;background:#2fa66a;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-weight:700;cursor:pointer;transition:background .3s ease}.user-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#24925c}.add-user-form[_ngcontent-%COMP%]{background:#fff;border:2px solid #89c997;border-radius:8px;padding:24px;box-shadow:0 4px 6px #0000001a;display:flex;flex-direction:column;gap:12px}.add-user-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;color:#2fa66a;margin-bottom:12px}.add-user-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-user-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px;font-size:16px;border-radius:6px;border:1px solid #ccc;font-family:Montserrat,sans-serif}.add-user-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#2fa66a;color:#fff;border:none;padding:10px 20px;border-radius:6px;font-weight:700;cursor:pointer;transition:background .3s ease}.add-user-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#24925c}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:16px;margin-bottom:32px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#2fa66a;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-weight:700;cursor:pointer;transition:background .3s ease;font-family:Montserrat,sans-serif}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#24925c}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#b5d9c4;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#2fa66a;font-family:Montserrat,sans-serif}.name-link[_ngcontent-%COMP%]{color:#2fa66a;text-decoration:none;font-weight:700;font-size:20px;line-height:1.15;display:inline-block;margin:0;padding:0 6px 0 0;border-radius:6px;transition:background-color .18s ease,color .12s ease,transform .12s ease}.name-link[_ngcontent-%COMP%]:hover{background:#2fa66a0f;color:#24925c;transform:translateY(-1px);text-decoration:none}.name-link[_ngcontent-%COMP%]:focus{outline:3px solid rgba(47,166,106,.14);outline-offset:2px;text-decoration:none}.name-link[_ngcontent-%COMP%]:visited{color:#2fa66a}.name-link[aria-current=true][_ngcontent-%COMP%], .name-link.active[_ngcontent-%COMP%]{background:#2fa66a1a;color:#1f5b3f}
/*# sourceMappingURL=proponents.component-BVXJKCCW.css.map */`]})}return r})();var Ce=()=>[];function Me(r,d){r&1&&(a(0,"div",7),i(1,"Loading\u2026"),n())}function he(r,d){if(r&1&&(a(0,"div",8),i(1),n()),r&2){let e=c();s(),b(e.error)}}function ve(r,d){if(r&1&&(a(0,"div",9)(1,"h2"),i(2),n(),a(3,"p")(4,"strong"),i(5,"Email:"),n(),i(6),n(),a(7,"p")(8,"strong"),i(9,"Gender:"),n(),i(10),n(),a(11,"p")(12,"strong"),i(13,"Status:"),n(),i(14),n()()),r&2){let e=c();s(2),b(e.user.name),s(4),u(" ",e.user.email,""),s(4),u(" ",e.user.gender,""),s(4),u(" ",e.user.status,"")}}function Pe(r,d){r&1&&(a(0,"div",10),i(1," Utente non trovato. "),n())}function Oe(r,d){if(r&1&&(a(0,"div",15)(1,"p")(2,"strong"),i(3),n(),i(4),n()()),r&2){let e=d.$implicit;s(3),b(e.name),s(),u(": ",e.body," ")}}function Se(r,d){if(r&1){let e=v();a(0,"form",16),_("ngSubmit",function(){g(e);let t=c().$implicit,m=c();return x(m.submitComment(t.id))}),w(1,"input",17)(2,"textarea",18),a(3,"button",19),i(4," Send "),n()()}if(r&2){let e,o,t=c().$implicit,m=c();p("formGroup",m.commentForms[t.id]),s(),j("invalid",((e=m.commentForms[t.id].get("name"))==null?null:e.invalid)&&((e=m.commentForms[t.id].get("name"))==null?null:e.touched)),s(),j("invalid",((o=m.commentForms[t.id].get("body"))==null?null:o.invalid)&&((o=m.commentForms[t.id].get("body"))==null?null:o.touched)),s(),p("disabled",m.commentForms[t.id].invalid)}}function ye(r,d){if(r&1&&(a(0,"div",11)(1,"h4"),i(2),n(),a(3,"p"),i(4),n(),a(5,"div",12)(6,"h5"),i(7,"Comments"),n(),M(8,Oe,5,2,"div",13)(9,Se,5,6,"form",14),n()()),r&2){let e=d.$implicit,o=c();s(2),b(e.title),s(2),b(e.body),s(4),p("ngForOf",e.comments||W(4,Ce)),s(),p("ngIf",o.commentForms[e.id])}}var ae=(()=>{class r{user=null;posts=[];commentForms={};loading=!1;error=null;http=C(K);route=C(Q);ngOnInit(){let e=this.route.snapshot.paramMap.get("id"),o=e?Number(e):null;if(!o){this.error="Invalid user id",this.loading=!1;return}this.loading=!0,this.http.get(`https://gorest.co.in/public/v2/users/${o}`).pipe(S(t=>(console.error("Failed loading user",t),this.error="Unable to load user",O(null)))).subscribe(t=>{this.user=t?P(h({},t),{name:(t.name||"").trim()}):null}),this.http.get(`https://gorest.co.in/public/v2/users/${o}/posts`).pipe(S(t=>(console.error("Failed loading posts",t),O([])))).subscribe(t=>{this.posts=Array.isArray(t)?t:[],this.posts.forEach(m=>{this.commentForms[m.id]=new Z({name:new B("",f.required),body:new B("",f.required)}),this.http.get(`https://gorest.co.in/public/v2/posts/${m.id}/comments`).pipe(S(l=>(console.error(`Failed loading comments for post ${m.id}`,l),O([])))).subscribe(l=>{m.comments=Array.isArray(l)?l:[]})}),this.loading=!1})}submitComment(e){let o=this.commentForms[e];if(!o||o.invalid)return;let t={id:Date.now(),name:o.value.name,email:"user@example.com",body:o.value.body},m=this.posts.find(l=>l.id===e);m&&(m.comments=[...m.comments||[],t]),o.reset()}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=y({type:r,selectors:[["app-user-detail"]],decls:9,vars:5,consts:[[1,"user-detail-wrapper"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","user-card",4,"ngIf"],["class","no-user",4,"ngIf"],[1,"post-section"],["class","post-card",4,"ngFor","ngForOf"],[1,"loading"],[1,"error"],[1,"user-card"],[1,"no-user"],[1,"post-card"],[1,"comments"],["class","comment",4,"ngFor","ngForOf"],["class","comment-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"comment"],[1,"comment-form",3,"ngSubmit","formGroup"],["formControlName","name","placeholder","Your name"],["formControlName","body","placeholder","Write a comment..."],["type","submit",1,"submit-btn",3,"disabled"]],template:function(o,t){o&1&&(a(0,"div",0),M(1,Me,2,0,"div",1)(2,he,2,1,"div",2)(3,ve,15,4,"div",3)(4,Pe,2,0,"div",4),a(5,"div",5)(6,"h3"),i(7,"Posts"),n(),M(8,ye,10,5,"div",6),n()()),o&2&&(s(),p("ngIf",t.loading),s(),p("ngIf",t.error),s(),p("ngIf",t.user),s(),p("ngIf",!t.loading&&!t.user&&!t.error),s(4),p("ngForOf",t.posts))},dependencies:[E,k,J,F,z,N,I,T,U,D,V,A,G,L,R,$,q],styles:[`.user-detail-wrapper[_ngcontent-%COMP%]{padding:32px;background:linear-gradient(#e7f8ec,#dff3e6);font-family:Montserrat,sans-serif;color:#333}.user-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #89c997;border-radius:8px;padding:24px;margin-bottom:32px;box-shadow:0 4px 6px #0000001a}.user-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#2fa66a;margin-bottom:12px}.user-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:4px 0}.post-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;color:#2fa66a;margin-bottom:16px}.post-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #89c997;border-radius:8px;padding:20px;margin-bottom:24px;box-shadow:0 4px 6px #0000001a}.post-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;color:#2fa66a;margin-bottom:8px}.post-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin-bottom:12px}.comments[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#2fa66a}.comment[_ngcontent-%COMP%]{background:#f4fbf7;border-left:4px solid #2fa66a;padding:12px;margin-bottom:8px;border-radius:4px}.comment-form[_ngcontent-%COMP%]{margin-top:12px;display:flex;flex-direction:column}.comment-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{margin-bottom:8px;padding:10px;border:1px solid #ccc;border-radius:4px;font-family:Montserrat,sans-serif;font-size:15px;box-sizing:border-box}.comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;max-height:160px;overflow-y:auto}.submit-btn[_ngcontent-%COMP%]{background:#2fa66a;color:#fff;border:none;padding:8px 16px;border-radius:4px;font-weight:700;cursor:pointer;transition:background .3s ease}.submit-btn[_ngcontent-%COMP%]:hover{background:#24925c}.invalid[_ngcontent-%COMP%]{border:2px solid #e57373;background:#fff0f0}.loading[_ngcontent-%COMP%]{margin-bottom:12px;color:#1f2937}.error[_ngcontent-%COMP%]{margin-bottom:12px;color:#b91c1c}.no-user[_ngcontent-%COMP%]{margin-bottom:12px;color:#6b7280}
/*# sourceMappingURL=user-detail.component-OQNZDC6Y.css.map */`]})}return r})();var Xe=[{path:"",component:re},{path:"user/:id",component:ae}];export{Xe as routes};
//# sourceMappingURL=chunk-FQDD6LJD.js.map
